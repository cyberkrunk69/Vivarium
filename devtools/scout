#!/bin/bash
# devtools/scout â€” Natural language scout commands.
# Usage: ./devtools/scout "refresh the docs for this feature they're stale"
#        ./devtools/scout "show me everything about scout at a deep level"
set -e

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
REPO_ROOT="$(cd "$SCRIPT_DIR/.." && pwd)"

# TICKET-17: Load .env from repo root before any Python/CLI runs
if [ -f "$REPO_ROOT/.env" ]; then
  set -a
  # shellcheck source=/dev/null
  . "$REPO_ROOT/.env"
  set +a
fi

# shellcheck source=_internal/common/utils.sh
source "$SCRIPT_DIR/_internal/common/utils.sh"
load_dotenv "$REPO_ROOT"

cd "$REPO_ROOT"
PYTHON=$(find_python "$REPO_ROOT")
exec "$PYTHON" -m vivarium.scout.cli.scout "$@"
