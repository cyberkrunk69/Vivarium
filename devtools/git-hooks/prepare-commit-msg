#!/bin/bash
# .git/hooks/prepare-commit-msg (installed by scout-autonomy enable-commit)
# Populates commit message from scout drafts (gate + whimsy when SCOUT_WHIMSY=1)
# Install: ./devtools/scout-autonomy enable-commit
msg_file="${1:?}"
REPO_ROOT="$(cd "$(git rev-parse --show-toplevel)" && pwd)"
source "$REPO_ROOT/devtools/_internal/common/utils.sh"
cd "$REPO_ROOT"
if [[ -d vivarium ]]; then
  $(find_python "$REPO_ROOT") -m vivarium.scout prepare-commit-msg "$msg_file" || true
fi
