[
  {
    "id": "lesson_010",
    "task_category": "dspy_prompt_optimization",
    "lesson": "DSPy self-bootstrapping (arXiv:2310.03714) achieves 25-65% improvement via in-context demonstrations",
    "trial_number": 10,
    "task_feedback": "Implemented: Few-shot example injection from successful task completions",
    "self_verification": true,
    "key_insights": [
      "Demonstrations collected from successful execution logs in grind_logs/",
      "Top-performing examples (lowest turn count, fastest completion) are selected as templates",
      "Few-shot examples injected directly into prompt template before RULES section",
      "Minimal overhead - examples parsed once and cached during session initialization"
    ],
    "retrieval_cues": [
      "prompt_optimization",
      "few_shot_prompting",
      "dspy_framework",
      "example_injection"
    ],
    "timestamp": "2026-02-03"
  },
  {
    "id": "lesson_011",
    "task_category": "dspy_prompt_optimization",
    "lesson": "Demonstration quality matters more than quantity - top 2-3 examples outperform larger sets",
    "trial_number": 11,
    "task_feedback": "Pattern: Efficiency-ranked demos (by num_turns and duration_ms) yield best in-context learning",
    "self_verification": true,
    "implementation_detail": "get_relevant_demonstrations() filters by efficiency metrics and returns top_k (default=2)",
    "metrics": {
      "quality_metric": "efficiency_score(num_turns, duration_ms)",
      "selection_strategy": "pareto_front - fewest turns AND fastest completion",
      "recommended_k": 2,
      "max_k": 3
    },
    "retrieval_cues": [
      "demonstration_selection",
      "quality_metrics",
      "efficiency_optimization"
    ],
    "timestamp": "2026-02-03"
  },
  {
    "id": "lesson_012",
    "task_category": "dspy_prompt_optimization",
    "lesson": "Module learning loop: collect_demonstrations -> score_prompt -> optimize_prompt -> next_run",
    "trial_number": 12,
    "task_feedback": "Architecture: prompt_optimizer.py encapsulates DSPy concepts as reusable pipeline",
    "self_verification": true,
    "pipeline_components": {
      "collect_demonstrations": "Extract is_error=False logs, parse task outcomes",
      "score_prompt": "Heuristic scoring (0-1) based on success rate and efficiency bonuses",
      "optimize_prompt": "Inject 2-3 best examples before RULES section",
      "get_relevant_demonstrations": "Task-aware filtering (currently uses efficiency; extensible for semantic matching)"
    },
    "integration_points": [
      "GrindSession.get_prompt() calls collect + optimize before each run",
      "LOGS_DIR is automatically scanned for new successful completions",
      "No explicit training loop needed - learning happens implicitly via log analysis"
    ],
    "retrieval_cues": [
      "prompt_optimization_pipeline",
      "module_learning",
      "self_bootstrapping"
    ],
    "timestamp": "2026-02-03"
  }
]
