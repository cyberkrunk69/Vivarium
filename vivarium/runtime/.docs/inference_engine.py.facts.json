{"ast_hash": "d832c21733b5e2f221b92fbf8a7460ff648523539c06e806d9371c7a4317f3f7", "control_flow": {"estimate_complexity": [{"blocks": [{"condition": "len(request) > 800", "line": 70, "type": "if"}], "function_name": "estimate_complexity"}], "get_engine_type_from_env": [{"blocks": [{"condition": "env == 'groq'", "line": 80, "type": "if"}, {"condition": "env == 'claude'", "line": 82, "type": "if"}], "function_name": "get_engine_type_from_env"}]}, "imports": ["__future__.annotations", "enum.Enum", "os", "re", "typing.List", "vivarium.utils.llm_cost.rough_token_count"], "path": "/Users/vivariumenv1/Vivarium/vivarium/runtime/inference_engine.py", "symbols": {"EngineType": {"defined_at": 18, "docstring": "Available inference backends.", "fields": [], "is_enum": true, "method_signatures": {}, "methods": [], "name": "EngineType", "purpose_hint": null, "semantic_role": "implementation", "signature": null, "type": "class", "type_annotation": null, "used_at": [76, 81, 83, 84], "value": null}, "_COMPLEXITY_KEYWORDS": {"defined_at": 26, "docstring": null, "fields": [], "is_enum": false, "method_signatures": {}, "methods": [], "name": "_COMPLEXITY_KEYWORDS", "purpose_hint": null, "semantic_role": "implementation", "signature": null, "type": "constant", "type_annotation": "List[str]", "used_at": [66], "value": "['algorithm', 'optimize', 'refactor', 'benchmark', 'scale', 'performance', 'thread', 'process', 'async', 'concurrency', 'distributed', 'pipeline', 'sql', 'database', 'api', 'authentication', 'encryption', 'docker', 'kubernetes', 'microservice', 'cache', 'index', 'migration']"}, "estimate_complexity": {"defined_at": 53, "docstring": "Return a numeric complexity score. Higher scores -> more demanding request.\n\n    Scoring factors:\n    - Base score = token count // 10\n    - +2 for each recognized complexity keyword present\n    - +5 if request length > 800 characters", "fields": [], "is_enum": false, "method_signatures": {}, "methods": [], "name": "estimate_complexity", "purpose_hint": null, "semantic_role": "implementation", "signature": "def estimate_complexity(request: str) -> int", "type": "function", "type_annotation": null, "used_at": [], "value": null}, "get_engine_type_from_env": {"defined_at": 76, "docstring": "Determine engine type from INFERENCE_ENGINE environment variable.", "fields": [], "is_enum": false, "method_signatures": {}, "methods": [], "name": "get_engine_type_from_env", "purpose_hint": null, "semantic_role": "implementation", "signature": "def get_engine_type_from_env() -> EngineType", "type": "function", "type_annotation": null, "used_at": [], "value": null}}}