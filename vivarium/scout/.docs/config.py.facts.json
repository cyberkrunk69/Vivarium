{"ast_hash": "39ecf1ae79e06dd46295b6d12e05002b10d0ac14bcfd36c32fb6557414152e6c", "control_flow": {"EnvLoader.load": [{"blocks": [{"condition": "cls._loaded", "line": 34, "type": "if"}, {"condition": "not path.exists()", "line": 38, "type": "if"}], "function_name": "EnvLoader.load"}], "ScoutConfig.effective_max_cost": [{"blocks": [{"condition": "file_path is not None", "line": 327, "type": "if"}, {"condition": "user_val is not None", "line": 338, "type": "if"}], "function_name": "ScoutConfig.effective_max_cost"}], "ScoutConfig.set": [{"blocks": [{"condition": "len(parts) < 2", "line": 406, "type": "if"}, {"condition": "proj.exists()", "line": 410, "type": "if"}], "function_name": "ScoutConfig.set"}], "ScoutConfig.should_process": [{"blocks": [{"condition": "estimated_cost > max_per", "line": 356, "type": "if"}, {"condition": "estimated_cost > HARD_MAX_COST_PER_EVENT", "line": 358, "type": "if"}, {"condition": "hourly_spend + estimated_cost > hour_budget", "line": 364, "type": "if"}], "function_name": "ScoutConfig.should_process"}], "ScoutConfig.validate_yaml": [{"blocks": [{"condition": "path is not None", "line": 421, "type": "if"}], "function_name": "ScoutConfig.validate_yaml"}], "ScoutConfig.whimsy_mode": [{"blocks": [{"condition": "os.environ.get('SCOUT_WHIMSY', '0') == '1'", "line": 394, "type": "if"}], "function_name": "ScoutConfig.whimsy_mode"}], "_load_yaml": [{"blocks": [{"condition": "not path.exists()", "line": 193, "type": "if"}], "function_name": "_load_yaml"}], "get_global_semaphore": [{"blocks": [{"condition": "_semaphore is None", "line": 166, "type": "if"}], "function_name": "get_global_semaphore"}]}, "imports": ["__future__.annotations", "asyncio", "dataclasses.dataclass", "logging", "os", "pathlib.Path", "re", "typing.Any", "typing.Dict", "typing.List", "typing.Optional", "yaml", "yaml", "yaml", "yaml"], "path": "/Users/vivariumenv1/Vivarium/vivarium/scout/config.py", "symbols": {"DEFAULT_CONFIG": {"defined_at": 105, "docstring": null, "fields": [], "methods": [], "name": "DEFAULT_CONFIG", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "constant", "type_annotation": null, "used_at": [254, 341], "value": "{'triggers': {'default': 'on-commit', 'patterns': [{'pattern': 'vivarium/runtime/**/*.py', 'trigger': 'on-save', 'max_cost': 0.02}, {'pattern': 'tests/**/*', 'trigger': 'manual'}, {'pattern': 'docs/**/*.md', 'trigger': 'disabled'}]}, 'limits': {'max_cost_per_event': 0.05, 'hourly_budget': 1.0, 'hard_safety_cap': 10.0}, 'models': {'scout_nav': 'llama-3.1-8b', 'max_for_auto': 'llama-3.1-8b', 'tldr': 'llama-3.1-8b-instant', 'deep': 'llama-3.3-70b-versatile', 'eliv': 'llama-3.1-8b-instant', 'pr_synthesis': 'llama-3.3-70b-versatile'}, 'notifications': {'on_validation_failure': 'alert'}, 'drafts': {'enable_commit_drafts': True, 'enable_pr_snippets': True, 'enable_impact_analysis': False, 'enable_module_briefs': True}, 'roast': {'enable_roast': True}, 'doc_generation': {'generate_eliv': True}, 'ui': {'whimsy': False}}"}, "ENV_TO_CONFIG": {"defined_at": 172, "docstring": null, "fields": [], "methods": [], "name": "ENV_TO_CONFIG", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "constant", "type_annotation": null, "used_at": [275], "value": "{'SCOUT_MAX_COST_PER_EVENT': ('limits', 'max_cost_per_event', float), 'SCOUT_HOURLY_BUDGET': ('limits', 'hourly_budget', float), 'SCOUT_DEFAULT_TRIGGER': ('triggers', 'default', str), 'SCOUT_ON_VALIDATION_FAILURE': ('notifications', 'on_validation_failure', str)}"}, "EnvLoader": {"defined_at": 21, "docstring": null, "fields": [], "methods": ["load"], "name": "EnvLoader", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "class", "type_annotation": null, "used_at": [], "value": null}, "HARD_MAX_AUTO_ESCALATIONS": {"defined_at": 94, "docstring": null, "fields": [], "methods": [], "name": "HARD_MAX_AUTO_ESCALATIONS", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "constant", "type_annotation": null, "used_at": [379], "value": "3"}, "HARD_MAX_COST_PER_EVENT": {"defined_at": 92, "docstring": null, "fields": [], "methods": [], "name": "HARD_MAX_COST_PER_EVENT", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "constant", "type_annotation": null, "used_at": [313, 334, 339, 342, 358, 377], "value": "1.0"}, "HARD_MAX_HOURLY_BUDGET": {"defined_at": 93, "docstring": null, "fields": [], "methods": [], "name": "HARD_MAX_HOURLY_BUDGET", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "constant", "type_annotation": null, "used_at": [295, 363, 378], "value": "10.0"}, "ScoutConfig": {"defined_at": 239, "docstring": null, "fields": [], "methods": ["__init__", "_default_search_paths", "_apply_env_overrides", "_ensure_hard_cap_in_limits", "resolve_trigger", "effective_max_cost", "should_process", "to_dict", "get_user_config_path", "get_project_config_path", "whimsy_mode", "get", "set", "validate_yaml"], "name": "ScoutConfig", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "class", "type_annotation": null, "used_at": [], "value": null}, "TriggerConfig": {"defined_at": 98, "docstring": null, "fields": [], "methods": [], "name": "TriggerConfig", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "class", "type_annotation": null, "used_at": [298, 316, 321], "value": null}, "_deep_merge": {"defined_at": 180, "docstring": null, "fields": [], "methods": [], "name": "_deep_merge", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "function", "type_annotation": null, "used_at": [185, 263], "value": null}, "_get_nested": {"defined_at": 220, "docstring": null, "fields": [], "methods": [], "name": "_get_nested", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "function", "type_annotation": null, "used_at": [335, 401], "value": null}, "_glob_to_regex": {"defined_at": 64, "docstring": null, "fields": [], "methods": [], "name": "_glob_to_regex", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "function", "type_annotation": null, "used_at": [83], "value": null}, "_load_yaml": {"defined_at": 191, "docstring": null, "fields": [], "methods": [], "name": "_load_yaml", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "function", "type_annotation": null, "used_at": [261], "value": null}, "_max_concurrent_calls": {"defined_at": 147, "docstring": null, "fields": [], "methods": [], "name": "_max_concurrent_calls", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "function", "type_annotation": null, "used_at": [167], "value": null}, "_path_matches": {"defined_at": 55, "docstring": null, "fields": [], "methods": [], "name": "_path_matches", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "function", "type_annotation": null, "used_at": [309, 331], "value": null}, "_save_yaml": {"defined_at": 206, "docstring": null, "fields": [], "methods": [], "name": "_save_yaml", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "function", "type_annotation": null, "used_at": [411, 414], "value": null}, "_semaphore": {"defined_at": 160, "docstring": null, "fields": [], "methods": [], "name": "_semaphore", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "constant", "type_annotation": "Optional[asyncio.Semaphore]", "used_at": [166, 168], "value": "None"}, "_set_nested": {"defined_at": 230, "docstring": null, "fields": [], "methods": [], "name": "_set_nested", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "function", "type_annotation": null, "used_at": [408], "value": null}, "get_global_semaphore": {"defined_at": 163, "docstring": null, "fields": [], "methods": [], "name": "get_global_semaphore", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "function", "type_annotation": null, "used_at": [], "value": null}, "logger": {"defined_at": 89, "docstring": null, "fields": [], "methods": [], "name": "logger", "purpose_hint": null, "semantic_role": null, "signature": null, "type": "constant", "type_annotation": null, "used_at": [202, 216, 290], "value": "logging.getLogger(__name__)"}}}