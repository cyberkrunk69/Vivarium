{
  "directive": "AUTONOMOUS SELF-IMPROVEMENT PROTOCOL",
  "version": "1.0",
  "budget": 0.25,
  "phases": [
    {
      "phase": 1,
      "name": "SCALING TEST",
      "task": "Test current system scaling by running 3 parallel workers on simple tasks. Measure: task completion rate, average time per task, cost efficiency, error rate. Log results to scaling_test_results.json.",
      "success_criteria": ["completion_rate >= 0.8", "no_crashes"],
      "on_failure": "proceed_to_phase_2"
    },
    {
      "phase": 2,
      "name": "SCALING ANALYSIS",
      "task": "If scaling test showed issues (completion_rate < 0.8 OR errors > 20%), analyze grind_logs/*.json and failure_patterns.json to identify bottlenecks. Document findings in scaling_analysis.md with specific code locations and proposed fixes.",
      "success_criteria": ["analysis_complete", "fixes_identified"],
      "on_failure": "log_and_continue"
    },
    {
      "phase": 3,
      "name": "SELF-REPAIR",
      "task": "Implement the fixes identified in Phase 2. Focus on: error handling, resource management, parallel execution bugs. Run targeted tests on fixed components.",
      "success_criteria": ["fixes_applied", "tests_pass"],
      "on_failure": "rollback_and_log"
    },
    {
      "phase": 4,
      "name": "RE-TEST SCALING",
      "task": "Re-run scaling test from Phase 1. Compare metrics to baseline. If improved by >20%, proceed to Phase 5. If not improved, document remaining issues.",
      "success_criteria": ["improvement >= 0.2"],
      "on_failure": "document_blockers"
    },
    {
      "phase": 5,
      "name": "AUTONOMOUS IMPROVEMENT",
      "task": "With scaling validated, begin autonomous self-improvement cycle. Reference research papers in RESEARCH_*.md files. Priority improvements: 1) Implement missing features from research (e.g., better prompt optimization, skill extraction), 2) Reduce cost per task, 3) Improve quality scores. Each improvement cycle: implement -> test -> measure -> log lesson.",
      "success_criteria": ["continuous_improvement"],
      "on_failure": "pause_and_report"
    }
  ],
  "safety_constraints": {
    "max_budget": 0.25,
    "require_human_approval_for": ["external_api_calls", "file_deletion", "system_changes"],
    "auto_halt_on": ["budget_exceeded", "5_consecutive_failures", "safety_violation"]
  },
  "learning_hooks": {
    "after_each_phase": "Record lesson to learned_lessons.json",
    "after_each_task": "Update knowledge_graph.json with new insights",
    "on_success": "Extract skill pattern to skills/skill_registry.py",
    "on_failure": "Record to failure_patterns.json for future avoidance"
  }
}
